"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[198],{1198:(v,d,r)=>{r.r(d),r.d(d,{routes:()=>w});var i={};r.r(i),r.d(i,{deleteArticleEffect:()=>V,getArticleEffect:()=>R,redirectAfterDeleteEffect:()=>q});var o=r(826),a=r(6789),u=r(4755),c=r(7701),g=r(9841),p=r(9300),A=r(4004),M=r(2377),y=r(4103),D=r(8929),I=r(7181);const l=(0,a.R7)({source:"article",events:{"Get article":(0,a.Ky)(),"Get article success":(0,a.Ky)(),"Get article failure":(0,a.uZ)(),"Delete article":(0,a.Ky)(),"Delete article success":(0,a.uZ)(),"Delete article failure":(0,a.uZ)()}});var O=r(720);const h={isLoading:!1,error:null,data:null},F=(0,a.Tz)({name:"article",reducer:(0,a.Lq)(h,(0,a.on)(l.getArticle,e=>({...e,isLoading:!0})),(0,a.on)(l.getArticleSuccess,(e,s)=>({...e,isLoading:!1,data:s.article})),(0,a.on)(l.getArticleFailure,e=>({...e,isLoading:!1})),(0,a.on)(O.hn,()=>h))}),{name:J,reducer:K,selectIsLoading:Q,selectError:N,selectData:Z}=F;var t=r(2223);const Y=function(e){return["/articles",e,"edit"]};function _(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"span")(1,"a",12),t._UZ(2,"i",13),t._uU(3," Edit Article "),t.qZA(),t.TgZ(4,"button",14),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(3);return t.KtG(m.deleteArticle())}),t._uU(5," Delete Article "),t.qZA()()}if(2&e){const n=t.oxw(2).ngIf;t.xp6(1),t.Q6J("routerLink",t.VKq(1,Y,n.article.slug))}}const T=function(e){return["/profiles",e]};function S(e,s){if(1&e&&(t.TgZ(0,"div",6)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"div",7)(4,"a",8),t._UZ(5,"img",9),t.qZA(),t.TgZ(6,"div",10)(7,"a",8),t._uU(8),t.qZA(),t.TgZ(9,"span",11),t._uU(10),t.qZA()(),t.YNc(11,_,6,3,"span",0),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(n.article.title),t.xp6(2),t.Q6J("routerLink",t.VKq(7,T,n.article.author.username)),t.xp6(1),t.Q6J("src",n.article.author.image,t.LSH),t.xp6(2),t.Q6J("routerLink",t.VKq(9,T,n.article.author.username)),t.xp6(1),t.hij(" ",n.article.author.username," "),t.xp6(2),t.Oqu(n.article.createdAt),t.xp6(1),t.Q6J("ngIf",n.isAuthor)}}function z(e,s){1&e&&t._UZ(0,"mc-loading")}function G(e,s){1&e&&t._UZ(0,"mc-error-message")}function P(e,s){if(1&e&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div")(3,"p"),t._uU(4),t.qZA()(),t._UZ(5,"mc-tag-list",17),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(4),t.Oqu(n.article.body),t.xp6(1),t.Q6J("tags",n.article.tagList)}}function j(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,S,12,11,"div",3),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,z,1,0,"mc-loading",0),t.YNc(6,G,1,0,"mc-error-message",0),t.YNc(7,P,6,2,"div",5),t.qZA()(),t.BQk()),2&e){const n=s.ngIf;t.xp6(3),t.Q6J("ngIf",n.article),t.xp6(2),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",n.error),t.xp6(1),t.Q6J("ngIf",n.article)}}let W=(()=>{class e{constructor(n,f){this.store=n,this.route=f,this.slug=this.route.snapshot.paramMap.get("slug")??"",this.isAuthor$=(0,g.a)({article:this.store.select(Z),currentUser:this.store.select(M.HF).pipe((0,p.h)(m=>void 0!==m))}).pipe((0,A.U)(({article:m,currentUser:U})=>!(!m||!U)&&m.author.username===U.username)),this.data$=(0,g.a)({isLoading:this.store.select(Q),error:this.store.select(N),article:this.store.select(Z),isAuthor:this.isAuthor$})}ngOnInit(){this.store.dispatch(l.getArticle({slug:this.slug}))}deleteArticle(){this.store.dispatch(l.deleteArticle({slug:this.slug}))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.yh),t.Y36(c.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["mc-article"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"article-page"],[1,"banner"],["class","container",4,"ngIf"],[1,"container","page"],["class","row article-content",4,"ngIf"],[1,"container"],[1,"article-meta"],[3,"routerLink"],[3,"src"],[1,"info"],[1,"data"],[1,"btn","btn-outline-secondary","btn-sm",3,"routerLink"],[1,"ion-edit"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"row","article-content"],[1,"col-xs-12"],[3,"tags"]],template:function(n,f){1&n&&(t.YNc(0,j,8,4,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,f.data$))},dependencies:[u.ez,u.O5,u.Ov,I.J,y.H,D.N,c.rH],encapsulation:2}),e})();var X=r(8745),$=r(3144);let L=(()=>{class e{constructor(n){this.http=n}deleteArticle(n){return this.http.delete(`${X.N.apiUrl}/articles/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG($.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=r(3900),C=r(262),E=r(9646),B=r(8505),H=r(6596);const R=(0,o.GW)((e=(0,t.f3M)(o.eX),s=(0,t.f3M)(H.n))=>e.pipe((0,o.l4)(l.getArticle),(0,x.w)(({slug:n})=>s.getArticle(n).pipe((0,A.U)(f=>l.getArticleSuccess({article:f})),(0,C.K)(()=>(0,E.of)(l.getArticleFailure()))))),{functional:!0}),V=(0,o.GW)((e=(0,t.f3M)(o.eX),s=(0,t.f3M)(L))=>e.pipe((0,o.l4)(l.deleteArticle),(0,x.w)(({slug:n})=>s.deleteArticle(n).pipe((0,A.U)(()=>l.deleteArticleSuccess()),(0,C.K)(()=>(0,E.of)(l.deleteArticleFailure()))))),{functional:!0}),q=(0,o.GW)((e=(0,t.f3M)(o.eX),s=(0,t.f3M)(c.F0))=>e.pipe((0,o.l4)(l.deleteArticleSuccess),(0,B.b)(()=>{s.navigateByUrl("/")})),{functional:!0,dispatch:!1}),w=[{path:"",component:W,providers:[(0,o.y3)(i),(0,a.oY)(J,K),L]}]},4103:(v,d,r)=>{r.d(d,{H:()=>o});var i=r(2223);let o=(()=>{class a{constructor(){this.message="Something went wrong"}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275cmp=i.Xpm({type:a,selectors:[["mc-error-message"]],inputs:{message:"message"},standalone:!0,features:[i.jDz],decls:2,vars:1,template:function(c,g){1&c&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&c&&(i.xp6(1),i.Oqu(g.message))},encapsulation:2}),a})()},8929:(v,d,r)=>{r.d(d,{N:()=>o});var i=r(2223);let o=(()=>{class a{}return a.\u0275fac=function(c){return new(c||a)},a.\u0275cmp=i.Xpm({type:a,selectors:[["mc-loading"]],standalone:!0,features:[i.jDz],decls:2,vars:0,template:function(c,g){1&c&&(i.TgZ(0,"div"),i._uU(1,"Loading..."),i.qZA())},encapsulation:2}),a})()},7181:(v,d,r)=>{r.d(d,{J:()=>u});var i=r(4755),o=r(2223);function a(c,g){if(1&c&&(o.TgZ(0,"li",2),o._uU(1),o.qZA()),2&c){const p=g.$implicit;o.xp6(1),o.hij(" ",p," ")}}let u=(()=>{class c{constructor(){this.tags=[]}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275cmp=o.Xpm({type:c,selectors:[["mc-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[o.jDz],decls:2,vars:1,consts:[[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(p,A){1&p&&(o.TgZ(0,"ul",0),o.YNc(1,a,2,1,"li",1),o.qZA()),2&p&&(o.xp6(1),o.Q6J("ngForOf",A.tags))},dependencies:[i.ez,i.sg],encapsulation:2}),c})()}}]);