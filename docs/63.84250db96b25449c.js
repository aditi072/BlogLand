"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[63],{63:(y,g,n)=>{n.r(g),n.d(g,{routes:()=>j});var u={};n.r(u),n.d(u,{getArticleEffect:()=>b,redirectAfterUpdateEffect:()=>W,updateArticleEffect:()=>D});var l=n(826),r=n(6789),d=n(4755),f=n(9300),m=n(4004),C=n(9841),U=n(2952),F=n(8929);const a=(0,r.R7)({source:"create article",events:{"Get article":(0,r.Ky)(),"Get article success":(0,r.Ky)(),"Get article failure":(0,r.uZ)(),"Update article":(0,r.Ky)(),"Update article success":(0,r.Ky)(),"Update article failure":(0,r.Ky)()}});var x=n(720);const A={article:null,isLoading:!1,isSubmitting:!1,validationErrors:null},I=(0,r.Tz)({name:"editArticle",reducer:(0,r.Lq)(A,(0,r.on)(a.getArticle,t=>({...t,isLoading:!0})),(0,r.on)(a.getArticleSuccess,(t,c)=>({...t,isLoading:!1,article:c.article})),(0,r.on)(a.getArticleFailure,t=>({...t,isLoading:!1})),(0,r.on)(a.updateArticle,t=>({...t,isSubmitting:!0})),(0,r.on)(a.updateArticleSuccess,t=>({...t,isSubmitting:!1})),(0,r.on)(a.updateArticleFailure,(t,c)=>({...t,isSubmitting:!1,validationErrors:c.errors})),(0,r.on)(x.hn,()=>A))}),{name:M,reducer:K,selectIsSubmitting:T,selectValidationErrors:V,selectIsLoading:G,selectArticle:N}=I;var e=n(2223),v=n(7701);function Y(t,c){1&t&&e._UZ(0,"mc-loading")}function Z(t,c){if(1&t){const i=e.EpF();e.TgZ(0,"mc-article-form",2),e.NdJ("articleSubmit",function(s){e.CHM(i);const p=e.oxw(2);return e.KtG(p.onSubmit(s))}),e.qZA()}if(2&t){const i=e.oxw().ngIf;e.Q6J("initialValues",i.initialValues)("isSubmitting",i.isSubmitting)("errors",i.backendErrors)}}function z(t,c){if(1&t&&(e.ynx(0),e.YNc(1,Y,1,0,"mc-loading",0),e.YNc(2,Z,1,3,"mc-article-form",1),e.BQk()),2&t){const i=c.ngIf;e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",i.initialValues)}}let O=(()=>{class t{constructor(i,o){this.store=i,this.route=o,this.initialValues$=this.store.pipe((0,r.Ys)(N),(0,f.h)(s=>null!==s),(0,m.U)(s=>({title:s.title,description:s.description,body:s.body,tagList:s.tagList}))),this.slug=this.route.snapshot.paramMap.get("slug")??"",this.data$=(0,C.a)({isSubmitting:this.store.select(T),backendErrors:this.store.select(V),isLoading:this.store.select(G),initialValues:this.initialValues$})}ngOnInit(){this.store.dispatch(a.getArticle({slug:this.slug}))}onSubmit(i){this.store.dispatch(a.updateArticle({request:{article:i},slug:this.slug}))}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(r.yh),e.Y36(v.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["mc-edit-article"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"initialValues","isSubmitting","errors","articleSubmit",4,"ngIf"],[3,"initialValues","isSubmitting","errors","articleSubmit"]],template:function(i,o){1&i&&(e.YNc(0,z,3,2,"ng-container",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.lcZ(1,1,o.data$))},dependencies:[U.E,d.ez,d.O5,d.Ov,F.N],encapsulation:2}),t})();var $=n(4766),J=n(3144);let h=(()=>{class t{constructor(i){this.http=i}updateArticle(i,o){return this.http.put(`${$.N.apiUrl}/articles/${i}`,o).pipe((0,m.U)(p=>p.article))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(J.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var E=n(3900),S=n(262),L=n(9646),Q=n(8505),X=n(6596);const b=(0,l.GW)((t=(0,e.f3M)(l.eX),c=(0,e.f3M)(X.n))=>t.pipe((0,l.l4)(a.getArticle),(0,E.w)(({slug:i})=>c.getArticle(i).pipe((0,m.U)(o=>a.getArticleSuccess({article:o})),(0,S.K)(()=>(0,L.of)(a.getArticleFailure()))))),{functional:!0}),D=(0,l.GW)((t=(0,e.f3M)(l.eX),c=(0,e.f3M)(h))=>t.pipe((0,l.l4)(a.updateArticle),(0,E.w)(({request:i,slug:o})=>c.updateArticle(o,i).pipe((0,m.U)(s=>a.updateArticleSuccess({article:s})),(0,S.K)(s=>(0,L.of)(a.updateArticleFailure({errors:s.error.errors})))))),{functional:!0}),W=(0,l.GW)((t=(0,e.f3M)(l.eX),c=(0,e.f3M)(v.F0))=>t.pipe((0,l.l4)(a.updateArticleSuccess),(0,Q.b)(({article:i})=>{c.navigate(["/articles",i.slug])})),{functional:!0,dispatch:!1}),j=[{path:"",component:O,providers:[h,(0,l.y3)(u),(0,r.oY)(M,K)]}]},8929:(y,g,n)=>{n.d(g,{N:()=>l});var u=n(2223);let l=(()=>{class r{}return r.\u0275fac=function(f){return new(f||r)},r.\u0275cmp=u.Xpm({type:r,selectors:[["mc-loading"]],standalone:!0,features:[u.jDz],decls:2,vars:0,template:function(f,m){1&f&&(u.TgZ(0,"div"),u._uU(1,"Loading..."),u.qZA())},encapsulation:2}),r})()}}]);